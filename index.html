<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora Salarial 6x2 Modular</title>
    <!-- Carga de Tailwind CSS para estilos -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
        }
        .card {
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        .input-style {
            padding: 8px;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
            width: 100%;
            transition: border-color 0.15s;
        }
        .input-style:focus {
            border-color: #4f46e5;
            outline: none;
            ring: 2px;
            ring-color: #6366f1;
        }
        .sticky-header th {
            position: sticky;
            top: 0;
            z-index: 10;
            background-color: #f9fafb;
        }
    </style>
</head>
<body class="min-h-screen flex items-start justify-center p-4">

    <!-- Contenedor Principal de la Aplicación -->
    <div id="app-container" class="w-full max-w-5xl bg-white rounded-xl card p-6 md:p-8 mt-4">
        <div class="flex flex-col md:flex-row justify-between items-start md:items-center border-b pb-2 mb-4">
            <h1 class="text-2xl font-bold text-indigo-700">
                Calculadora Salarial 6x2
            </h1>
            <div id="auth-controls" class="flex space-x-2 mt-2 md:mt-0 items-center">
                <div id="user-info" class="text-sm text-gray-600">Cargando...</div>
                <button id="google-login-btn" class="flex items-center px-3 py-1 bg-blue-600 text-white text-sm font-semibold rounded-lg shadow hover:bg-blue-700 transition duration-150">
                    <!-- Google SVG Icon -->
                    <svg class="w-4 h-4 mr-1" fill="currentColor" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg"><path d="M44.5 20H24v8.5h11.8c-.7 4.3-3.6 7.9-7.9 10.1v7H44c.4-3.4 2.8-6.4 5.9-8.5v-2c-3-2.1-5.4-5.1-5.9-8.5z" fill="#4285F4"/><path d="M24 44.5h20.5v-7h-7c-2.3 2.1-5 3.7-7.7 4.7v2.3c3 0 5.8-.8 8.1-2.2v-2z" fill="#34A853"/><path d="M24 3.5V11H4v7h20v8.5h-11.8c.7 4.3 3.6 7.9 7.9 10.1v7c-8.9-3.2-14.9-12-14.9-22.6C9.1 12 14.1 6.5 24 3.5z" fill="#FBBC05"/><path d="M24 3.5V11h20v-7H24z" fill="#EA4335"/></svg>
                    Google
                </button>
                <button id="logout-btn" class="hidden px-3 py-1 bg-gray-500 text-white text-sm font-semibold rounded-lg shadow hover:bg-gray-600 transition duration-150">
                    Salir
                </button>
            </div>
        </div>
        
        <div id="status-message" class="hidden p-3 rounded-lg mt-4 font-semibold text-sm"></div>

        <!-- Panel de Configuración -->
        <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6 p-4 bg-gray-50 rounded-lg">
            <div>
                <label class="block text-sm font-medium text-gray-700">Mes</label>
                <select id="input-month" name="month" class="input-style"></select>
            </div>
            <div>
                <label class="block text-sm font-medium text-gray-700">Año</label>
                <input id="input-year" type="number" name="year" class="input-style">
            </div>
            <div class="col-span-2 md:col-span-1">
                <label class="block text-sm font-medium text-gray-700">Valor Hora Bruta ($)</label>
                <input id="input-valorHora" type="number" name="valorHora" class="input-style" step="0.01">
            </div>
            <div class="col-span-2 md:col-span-1">
                <label class="block text-sm font-medium text-gray-700">Desc. Afiliación</label>
                <select id="input-discountRate" name="discountRate" class="input-style">
                    <option value="0.18">No Afiliado (18%)</option>
                    <option value="0.16">Afiliado (16%)</option>
                </select>
            </div>
            <div class="col-span-2">
                <label class="block text-sm font-medium text-gray-700">Fecha del Último Franco (Día 2)</label>
                <input id="input-lastFrancoDate" type="date" name="lastFrancoDate" class="input-style">
            </div>
            <div class="col-span-2">
                <label class="block text-sm font-medium text-gray-700">Turno Post-Franco</label>
                <select id="input-initialTurn" name="initialTurn" class="input-style">
                    <option value="Mañana">Mañana</option>
                    <option value="Noche">Noche</option>
                    <option value="Tarde">Tarde</option>
                </select>
            </div>
        </div>

        <button id="calculate-schedule-button" class="w-full py-3 mt-2 rounded-lg text-white font-bold transition duration-150 bg-indigo-700 hover:bg-indigo-800">
            Generar/Actualizar Horario y Calcular Salario
        </button>

        <!-- Sección de Resultados (Oculta hasta el cálculo) -->
        <div id="results-section" class="hidden mt-6 border-t pt-6">
            <h2 class="text-xl font-bold text-indigo-700 mb-4">Resumen de Ganancias</h2>
            <div id="summary-cards" class="grid grid-cols-2 md:grid-cols-4 gap-4 text-sm font-medium mb-6">
                <!-- Cards de resumen aquí -->
            </div>

            <div id="francos-info" class="p-3 bg-yellow-50 rounded-lg text-sm mb-4">
                <!-- Información de francos aquí -->
            </div>

            <button id="generate-pdf-button" class="w-full py-2 mb-6 rounded-lg bg-red-600 hover:bg-red-700 text-white font-bold transition duration-150 flex items-center justify-center">
                <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 13h6m-3-3v6m5 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg>
                Descargar Reporte PDF
            </button>
            
            <!-- Tabla de Detalle Diario -->
            <h3 class="text-lg font-bold text-gray-800 mb-3 border-t pt-4">Detalle Diario, Feriados y Horas Extra</h3>
            <p class="text-xs text-red-600 mb-3">
                ⚠️ Marca la casilla "Es Feriado" para aplicar la equivalencia de **32 Horas** (si trabajas) o **8 Horas** (si es Franco).
            </p>
            <div id="daily-detail-table-container" class="overflow-x-auto rounded-lg border" style="max-height: 400px; overflow-y: auto;">
                <table id="daily-detail-table" class="min-w-full divide-y divide-gray-200 text-xs">
                    <thead class="bg-gray-100 sticky-header">
                        <tr>
                            <th class="px-3 py-2 text-left text-gray-500">Fecha</th>
                            <th class="px-3 py-2 text-left text-gray-500">Turno</th>
                            <th class="px-3 py-2 text-center text-gray-500">Es Feriado</th>
                            <th class="px-3 py-2 text-right text-gray-500">H. Eq. Base</th>
                            <th class="px-3 py-2 text-center text-gray-500">H. Extra (Reales)</th>
                            <th class="px-3 py-2 text-right text-gray-500">H. Eq. Total</th>
                            <th class="px-3 py-2 text-right text-gray-500">Monto Bruto</th>
                        </tr>
                    </thead>
                    <tbody id="daily-detail-tbody" class="bg-white divide-y divide-gray-200">
                        <!-- Filas de detalle diario aquí -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Carga el módulo principal de la aplicación -->
    <script type="module" src="./src/main.js"></script>

    <!-- CARGA DE LIBRERÍAS JSDPF Y AUTOTABLE -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.25/jspdf.plugin.autotable.min.js"></script>
</body>
</html>
